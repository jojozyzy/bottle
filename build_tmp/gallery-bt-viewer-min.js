YUI.add("gallery-bt-viewer",function(d){var b="bvi_",g={IMAGE:b+"image",BOTTON:b+"button",EXPAND:b+"expand"},f='<span class="'+g.BOTTON+'"></span>',a=function(h){if(h.get("naturalWidth")>h.get("offsetWidth")){h.insert(f,"before");}},e=function(i){var j=i.currentTarget,h=j.next("."+g.IMAGE);i.preventDefault();j.toggleClass(g.EXPAND);h.toggleClass(g.EXPAND);this._uiDimensionsChange();this.syncScroll();},c=d.Base.create("btviewer",d.ScrollView,[d.Bottle.SyncScroll,d.zui.Attribute],{initializer:function(){try{this.setAttrs({flick:false,bounce:0});this.setAttrs(d.JSON.parse(this.get("contentBox").getData("cfg-scroll")));}catch(h){}this.set("syncScrollMethod",this._uiDimensionsChange);},destructor:function(){this.unplug(d.zui.RAScroll);this._bviEventHandlers.detach();delete this._bviEventHandlers;},renderUI:function(){var i=this.get("contentBox"),h=this.get("imageNode"),j=this;this.plug(d.zui.RAScroll);this.unplug(d.Plugin.ScrollViewScrollbars);if(!d.Bottle.Device.getTouchSupport()){this.plug(d.zui.ScrollHelper);}h.addClass(g.IMAGE);h.each(function(k){if(k.get("naturalWidth")){a(k);}else{k.once("load",function(l){a(l.target);j._uiDimensionsChange();j.syncScroll();});}});this._bviEventHandlers=new d.EventHandle([i.delegate("click",e,"."+g.BOTTON,this)]);d.once("btNative",this._nativeScroll,this);this._uiDimensionsChange();this.syncScroll();},_nativeScroll:function(){this._prevent={move:false,start:false,end:false};}},{ATTRS:{imageNode:{writeOnce:true,lazyAdd:false,setter:function(h){this._imageCSS=h;return this.get("contentBox").all(h);}}},HTML_PARSER:{imageNode:function(h){return h.getData("image-node")||"img";}}});d.namespace("Bottle").Viewer=c;},"@VERSION@",{requires:["gallery-bt-syncscroll","gallery-zui-rascroll","gallery-zui-attribute","gallery-zui-scrollhelper"]});